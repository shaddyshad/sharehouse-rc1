dragSorter.js:970: WARNING - Suspicious code. The result of the 'getprop' operator is not being used.
                  target.offsetWidth; // repaint
                  ^^^^^^^^^^^^^^^^^^

0 error(s), 1 warning(s)
/*
 MIT
*/
(function(g,D){(function(g){"function"===typeof define&&define.amd?define(g):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=g():"undefined"!==typeof Package?DragSorter=g():window.DragSorter=g()})(function(){function t(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"DragSorter: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a;this.options=b=g.extend({},b,!0);a[E]=this;var c={group:Math.random(),sort:!0,disabled:!1,touchSupport:!1,store:null,handle:null,
scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}},q;for(q in c)q in b||(b[q]=c[q]);V(b);for(var e in this)"_"===
e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));this.nativeDraggable=b.forceFallback?!1:ca;f.bind(a,"mousedown",this._onTapStart);f.bind(a,"pointerdown",this._onTapStart);!0===b.touchSupport&&f.bind(a,"touchstart",this._onTapStart);this.nativeDraggable&&(f.bind(a,"dragover",this),f.bind(a,"dragenter",this));J.push(this._onDragOver);b.store&&this.sort(b.store.get(this))}function O(a){r&&r.state!==a&&(g.css(r,"display",a?"none":""),!a&&r.state&&l.insertBefore(r,d),r.state=a)}
function z(a,b,c){if(a){c=c||k;do if(">*"===b&&a.parentNode===c||g.matches(a,b))return a;while(a=D.getParentOrHost(a))}return null}function y(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var q=(" "+a.className+" ").replace(W," ").replace(" "+b+" "," ");a.className=(q+(c?" "+b:"")).replace(W," ")}}function L(a,b,c){if(a&&a.style&&void 0===c)return k.defaultView&&k.defaultView.getComputedStyle?c=k.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:
c[b]}function X(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var q=a.length;if(c)for(;b<q;b++)c(a[b],b);return a}return[]}function m(a,b,c,q,e,d,f){a=a||b[E];var n=k.createEvent("Event"),g=a.options,I="on"+c.charAt(0).toUpperCase()+c.substr(1);n.initEvent(c,!0,!0);n.to=b;n.from=e||b;n.item=q||b;n.clone=r;n.oldIndex=d;n.newIndex=f;b.dispatchEvent(n);g[I]&&g[I].call(a,n)}function Y(a,b,c,d,e,f,g){var q=a[E],I=q.options.onMove,l;var h=k.createEvent("Event");h.initEvent("move",!0,!0);h.to=b;h.from=a;
h.dragged=c;h.draggedRect=d;h.related=e||b;h.relatedRect=f||b.getBoundingClientRect();a.dispatchEvent(h);I&&(l=I.call(q,h,g));return l}function Z(a){a.draggable=!1}function da(){P=!1}function ea(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function aa(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c);c=void 0},b))}}if("undefined"==typeof window||
!window.document)return function(){throw Error("DragSorter.js requires a window with a document");};var d,B,h,r,l,K,u,Q,R,S,M,T,v,p,F,U,A={},C,x,N,W=/\s+/g,E="DragSorter"+(new Date).getTime(),G=window,k=G.document,ca=!!("draggable"in k.createElement("div")),ba=function(a){if(navigator.userAgent.match(/Trident.*rv[ :]?11\./))return!1;a=k.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),P=!1,H=Math.abs,fa=Math.min,J=[],f=new Barge.Event.EventManager,ha=
aa(function(a,b,c){if(c&&b.scroll){var d=c[E],e=b.scrollSensitivity,f=b.scrollSpeed,g=a.clientX,h=a.clientY,l=window.innerWidth,k=window.innerHeight,r,p;if(Q!==c&&(u=b.scroll,Q=c,R=b.scrollFn,!0===u)){u=c;do if(u.offsetWidth<u.scrollWidth||u.offsetHeight<u.scrollHeight)break;while(u=u.parentNode)}if(u){var w=u;b=u.getBoundingClientRect();var t=(H(b.right-g)<=e)-(H(b.left-g)<=e);var m=(H(b.bottom-h)<=e)-(H(b.top-h)<=e)}t||m||(t=(l-g<=e)-(g<=e),m=(k-h<=e)-(h<=e),(t||m)&&(w=G));if(A.vx!==t||A.vy!==m||
A.el!==w)A.el=w,A.vx=t,A.vy=m,clearInterval(A.pid),w&&(A.pid=setInterval(function(){p=m?m*f:0;r=t?t*f:0;if("function"===typeof R)return R.call(d,r,p,a);w===G?G.scrollTo(G.pageXOffset+r,G.pageYOffset+p):(w.scrollTop+=p,w.scrollLeft+=r)},24))}},30),V=function(a){function b(a,b){if(void 0===a||!0===a)a=c.name;return"function"===typeof a?a:function(c,e){c=e.options.group.name;return b?a:a&&(a.join?-1<a.indexOf(c):c==a)}}var c={},d=a.group;d&&"object"==typeof d||(d={name:d});c.name=d.name;c.checkPull=
b(d.pull,!0);c.checkPut=b(d.put);a.group=c};t.prototype={constructor:t,_onTapStart:function(a){var b=this,c=this.el,q=this.options,e=a.touches&&a.touches[0],f=(e||a).target,g=a.target.shadowRoot&&a.path[0]||f,h=q.filter;if(!(d||"mousedown"===a.type&&0!==a.button||q.disabled||q.handle&&!z(g,q.handle,c))&&(f=z(f,q.draggable,c))){var l=D.index(f,q.draggable);if("function"===typeof h){if(h.call(this,a,f,this)){m(b,g,"filter",f,c,l);a.preventDefault();return}}else if(h&&(h=h.split(",").some(function(a){if(a=
z(g,a.trim(),c))return m(b,a,"filter",f,c,l),!0}))){a.preventDefault();return}this._prepareDragStart(a,e,f,l)}},_prepareDragStart:function(a,b,c,q){var e=this,h=e.el,k=e.options,n=g.defined(h)?h.ownerDocument:null;c&&!d&&c.parentNode===h&&(C=a,l=h,d=c,B=d.parentNode,K=d.nextSibling,F=k.group,v=q,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,d.style["will-change"]="transform",c=function(){e._disableDelayedDrag();d.draggable=e.nativeDraggable;y(d,k.chosenClass,!0);e._triggerDragStart(a,b);m(e,
l,"choose",d,l,v)},k.ignore.split(",").forEach(function(a){X(d,a.trim(),Z)}),f.bind(n,"mouseup",e._onDrop),f.bind(n,"pointercancel",e._onDrop),!0===k.touchSupport&&(f.bind(n,"touchend",e._onDrop),f.bind(n,"touchcancel",e._onDrop)),k.delay?(f.bind(n,"mouseup",e._disableDelayedDrag),f.bind(n,"mousemove",e._disableDelayedDrag),f.bind(n,"pointermove",e._disableDelayedDrag),!0===k.touchSupport&&(f.bind(n,"touchend",e._disableDelayedDrag),f.bind(n,"touchcancel",e._disableDelayedDrag),f.bind(n,"touchmove",
e._disableDelayedDrag)),e._dragStartTimer=setTimeout(c,k.delay)):c())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer);f.unbind(a,"mouseup",this._disableDelayedDrag);f.unbind(a,"touchend",this._disableDelayedDrag);f.unbind(a,"touchcancel",this._disableDelayedDrag);f.unbind(a,"mousemove",this._disableDelayedDrag);f.unbind(a,"touchmove",this._disableDelayedDrag);f.unbind(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,b){(b=b||("touch"==
a.pointerType?a:null))?(C={target:d,clientX:b.clientX,clientY:b.clientY},this._onDragStart(C,"touch")):this.nativeDraggable?(f.bind(d,"dragend",this),f.bind(l,"dragstart",this._onDragStart)):this._onDragStart(C,!0);try{k.selection?setTimeout(function(){k.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(){if(l&&d){var a=this.options;y(d,a.ghostClass,!0);y(d,a.dragClass,!1);t.active=this;m(this,l,"start",d,l,v)}},_emulateDragOver:function(){if(x&&(this._lastX!==
x.clientX||this._lastY!==x.clientY)){this._lastX=x.clientX;this._lastY=x.clientY;ba||g.css(h,{display:"none"});var a=k.elementFromPoint(x.clientX,x.clientY),b=a,c=J.length;if(b){do{if(b[E]){for(;c--;)J[c]({clientX:x.clientX,clientY:x.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode)}ba||g.css(h,{display:""})}},_onTouchMove:function(a){if(C){var b=this.options,c=b.fallbackTolerance,d=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=b.clientX-C.clientX+d.x;d=b.clientY-C.clientY+d.y;e=a.touches?
"translate3d("+e+"px,"+d+"px,0)":"translate("+e+"px,"+d+"px)";if(!t.active){if(c&&fa(H(b.clientX-this._lastX),H(b.clientY-this._lastY))<c)return;this._dragStarted()}this._appendGhost();N=!0;x=b;g.css(h,{webkitTransform:e});g.css(h,{mozTransform:e});g.css(h,{msTransform:e});g.css(h,{transform:e});a.preventDefault()}},_appendGhost:function(){if(!h){var a=d.getBoundingClientRect(),b=L(d),c=this.options;h=d.cloneNode(!0);y(h,c.ghostClass,!1);y(h,c.fallbackClass,!0);y(h,c.dragClass,!0);g.css(h,{top:a.top-
g.pInt(b.marginTop,10)});g.css(h,{left:a.left-g.pInt(b.marginLeft,10)});g.css(h,{width:a.width});g.css(h,{height:a.height});g.css(h,{opacity:"0.8"});g.css(h,{position:"fixed"});g.css(h,{zIndex:"100000"});g.css(h,{pointerEvents:"none"});c.fallbackOnBody&&k.body.appendChild(h)||l.appendChild(h);b=h.getBoundingClientRect();g.css(h,{width:2*a.width-b.width});g.css(h,{height:2*a.height-b.height})}},_onDragStart:function(a,b){var c=a.dataTransfer,h=this.options;this._offUpEvents();"clone"==F.checkPull(this,
this,d,a)&&(r=D.cloneNode(d),g.css(r,{display:"none"}),l.insertBefore(r,d),m(this,l,"clone",d));y(d,h.dragClass,!0);b?("touch"===b?(f.bind(k,"touchmove",this._onTouchMove),f.bind(k,"touchend",this._onDrop),f.bind(k,"touchcancel",this._onDrop),f.bind(k,"pointermove",this._onTouchMove),f.bind(k,"pointerup",this._onDrop)):(f.bind(k,"mousemove",this._onTouchMove),f.bind(k,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",h.setData&&h.setData.call(this,
c,d)),f.bind(k,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var b=this.el,c;var f=this.options;var e=f.group;var g=t.active,k=F===e,n=f.sort;void 0!==a.preventDefault&&(a.preventDefault(),!f.dragoverBubble&&a.stopPropagation());N=!0;if(F&&!f.disabled&&(k?n||(c=!l.contains(d)):U===this||F.checkPull(this,g,d,a)&&e.checkPut(this,g,d,a))&&(void 0===a.rootEl||a.rootEl===this.el)&&(ha(a,f,this.el),!P))if(e=z(a.target,f.draggable,b),f=d.getBoundingClientRect(),U=this,c)O(!0),B=
l,r||K?l.insertBefore(d,r||K):n||l.appendChild(d);else if(!(c=0===b.children.length||b.children[0]===h)&&(c=b===a.target)&&(e=b.lastElementChild,c=e.getBoundingClientRect(),c=e=(5<a.clientY-(c.top+c.height)||5<a.clientX-(c.right+c.width))&&e),c){if(e){if(e.animated)return;var m=e.getBoundingClientRect()}O(k);!1!==Y(l,b,d,f,e,m,a)&&(d.contains(b)||(b.appendChild(d),B=b),this._animate(f,d),e&&this._animate(m,e))}else if(e&&!e.animated&&e!==d&&void 0!==e.parentNode[E]){S!==e&&(S=e,M=L(e),T=L(e.parentNode));
m=e.getBoundingClientRect();g=m.right-m.left;c=m.bottom-m.top;var p=/left|right|inline/.test(M.cssFloat+M.display)||"flex"==T.display&&0===T["flex-direction"].indexOf("row");n=e.offsetWidth>d.offsetWidth;var u=e.offsetHeight>d.offsetHeight,v=.5<(p?(a.clientX-m.left)/g:(a.clientY-m.top)/c);g=e.nextElementSibling;var w=Y(l,b,d,f,e,m,a);!1!==w&&(P=!0,setTimeout(da,30),O(k),1===w||-1===w?a=1===w:p?(k=d.offsetTop,p=e.offsetTop,a=k===p?e.previousElementSibling===d&&!n||v&&n:e.previousElementSibling===d||
d.previousElementSibling===e?.5<(a.clientY-m.top)/c:p>k):a=g!==d&&!u||v&&u,d.contains(b)||(a&&!g?b.appendChild(d):e.parentNode.insertBefore(d,a?g:e)),B=d.parentNode,this._animate(f,d),this._animate(m,e))}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();g.css(b,{transition:"none"});g.css(b,{transform:"translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"});b.offsetWidth;g.css(b,{transition:"all "+c+"ms"});g.css(b,{transform:"translate3d(0,0,0)"});clearTimeout(b.animated);
b.animated=setTimeout(function(){g.css(b,{transition:""});g.css(b,{transform:""});b.animated=!1},c)}},_offUpEvents:function(){if(g.defined(this.el)){var a=this.el.ownerDocument;f.unbind(k,"pointermove",this._onTouchMove);f.unbind(a,"mouseup",this._onDrop);f.unbind(a,"pointerup",this._onDrop);!0===this.options.touchSupport&&(f.unbind(k,"touchmove",this._onTouchMove),f.unbind(a,"touchend",this._onDrop),f.unbind(a,"touchcancel",this._onDrop))}},_onDrop:function(a){var b=this.el,c=this.options;clearInterval(this._loopId);
clearInterval(A.pid);clearTimeout(this._dragStartTimer);f.unbind(k,"mousemove",this._onTouchMove);this.nativeDraggable&&(f.unbind(k,"drop",this),f.unbind(b,"dragstart",this._onDragStart));this._offUpEvents();if(a&&(N&&(a.preventDefault(),!c.dropBubble&&a.stopPropagation()),h&&h.parentNode.removeChild(h),d&&(this.nativeDraggable&&f.unbind(d,"dragend",this),Z(d),d.style["will-change"]="",y(d,this.options.ghostClass,!1),y(d,this.options.chosenClass,!1),l!==B?(p=D.index(d,c.draggable),0<=p&&(m(null,B,
"add",d,l,v,p),m(this,l,"remove",d,l,v,p),m(null,B,"sort",d,l,v,p),m(this,l,"sort",d,l,v,p))):(r&&r.parentNode.removeChild(r),d.nextSibling!==K&&(p=D.index(d,c.draggable),0<=p&&(m(this,l,"update",d,l,v,p),m(this,l,"sort",d,l,v,p)))),t.active))){if(null==p||-1===p)p=v;m(this,l,"end",d,l,v,p);this.save()}this._nulling()},_nulling:function(){l=d=B=h=K=r=u=Q=C=x=N=p=S=M=U=F=t.active=null},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?d&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect=
"move"),a.preventDefault()):"drop"!==b&&"dragend"!==b||this._onDrop(a)},toArray:function(){for(var a=[],b,c=this.el.children,d=0,e=c.length,f=this.options;d<e;d++)b=c[d],z(b,f.draggable,this.el)&&a.push(b.getAttribute(f.dataIdAttr)||ea(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){d=c.children[d];z(d,this.options.draggable,c)&&(b[a]=d)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&
a.set(this)},closest:function(a,b){return z(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===a&&V(c)},destroy:function(){var a=this.el;a[E]=null;f.unbind(a,"mousedown",this._onTapStart);f.unbind(a,"pointerdown",this._onTapStart);!0===options.touchSupport&&f.unbind(a,"touchstart",this._onTapStart);this.nativeDraggable&&(f.unbind(a,"dragover",this),f.unbind(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(a){a.removeAttribute("draggable")});J.splice(J.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};t.utils={on:f.bind,off:f.unbind,css:L,find:X,is:function(a,b){return!!z(a,b,a)},extend:g.extend,throttle:aa,closest:z,toggleClass:y,clone:D.cloneNode,index:D.index};t.create=function(a,b){return new t(a,b)};t.version="1.5.0-rc1";return t})})(Barge.utils,Barge.Dom);
